
Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio Version 17
VisualStudioVersion = 17.0.31825.309
MinimumVisualStudioVersion = 10.0.40219.1
Project("{9A19103F-16F7-4668-BE54-9A1E7A4F7556}") = "SadConsole", "SadConsole\SadConsole.csproj", "{47532D92-BB78-493A-A693-CC3687F609F6}"
EndProject
Project("{9A19103F-16F7-4668-BE54-9A1E7A4F7556}") = "SadConsole.Host.MonoGame", "SadConsole.Host.MonoGame\SadConsole.Host.MonoGame.csproj", "{F02A2B3B-706E-4277-9CE2-B47733CCB22F}"
EndProject
Project("{9A19103F-16F7-4668-BE54-9A1E7A4F7556}") = "SadConsole.Extended", "SadConsole.Extended\SadConsole.Extended.csproj", "{33F13C14-A4E4-467A-BBBC-14A0F7408E77}"
EndProject
Project("{9A19103F-16F7-4668-BE54-9A1E7A4F7556}") = "SadConsole.Debug.MonoGame", "SadConsole.Debug.MonoGame\SadConsole.Debug.MonoGame.csproj", "{3D40BD49-A118-4655-8452-8CFAE677847A}"
EndProject
Project("{9A19103F-16F7-4668-BE54-9A1E7A4F7556}") = "Editor", "Samples\Editor\Editor.csproj", "{2972BDC7-1337-4BDC-8C37-99227A7861FD}"
EndProject
Project("{D954291E-2A0B-460D-934E-DC6B0785DB48}") = "SadConsole.Host.Shared", "SadConsole.Host.Shared\SadConsole.Host.Shared.shproj", "{595434C5-2192-495B-903C-7922D7E8B149}"
EndProject
Global
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.17;

/**
 * @title FavoriteRecords
 * @dev Contract to manage a list of approved music records and allow users to add them to their favorites
 */
contract FavoriteRecords {

    mapping(string => bool) private approvedRecords;
    string[] private approvedRecordsIndex;

    mapping(address => mapping(string => bool)) public userFavorites;
    mapping(address => string[]) private userFavoritesIndex;

    error NotApproved(string albumName);

    /**
     * @dev Constructor that initializes the approved records list
     */
    constructor() {
        approvedRecordsIndex = ["Thriller","Back in Black","The Bodyguard","The Dark Side of the Moon","Their Greatest Hits (1971-1975)","Hotel California","Come On Over","Rumours","Saturday Night Fever"];
        for (uint i = 0; i < approvedRecordsIndex.length; i++) 
        {
            approvedRecords[approvedRecordsIndex[i]] = true;
        }
    }

    /**
     * @dev Returns the list of approved records
     * @return An array of approved record names
     */
    function getApprovedRecords() public view returns (string[] memory) {
        return approvedRecordsIndex;
    }

    /**
     * @dev Adds an approved record to the user's favorites
     * @param _albumName The name of the album to be added
     */
    function addRecord(string memory _albumName) public {
        if (!approvedRecords[_albumName]) {
            revert NotApproved({albumName: _albumName});
        }
        if (!userFavorites[msg.sender][_albumName]) {
            userFavorites[msg.sender][_albumName] = true;
            userFavoritesIndex[msg.sender].push(_albumName);
        }
    }

    /**
     * @dev Returns the list of a user's favorite records
     * @param _address The address of the user
     * @return An array of user's favorite record names
     */
    function getUserFavorites(address _address) public view returns (string[] memory) {
        return userFavoritesIndex[_address];
    }

    /**
     * @dev Resets the caller's list of favorite records
     */
    function resetUserFavorites() public {
        for (uint i = 0; i < userFavoritesIndex[msg.sender].length; i++) {
            delete userFavorites[msg.sender][userFavoritesIndex[msg.sender][i]];
        }
        delete userFavoritesIndex[msg.sender];
    }
}

	GlobalSection(SolutionConfigurationPlatforms) = preSolution
		Debug|Any CPU = Debug|Any CPU
		Release|Any CPU = Release|Any CPU
	EndGlobalSection
	GlobalSection(ProjectConfigurationPlatforms) = postSolution
		{47532D92-BB78-493A-A693-CC3687F609F6}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{47532D92-BB78-493A-A693-CC3687F609F6}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{47532D92-BB78-493A-A693-CC3687F609F6}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{47532D92-BB78-493A-A693-CC3687F609F6}.Release|Any CPU.Build.0 = Release|Any CPU
		{F02A2B3B-706E-4277-9CE2-B47733CCB22F}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{F02A2B3B-706E-4277-9CE2-B47733CCB22F}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{F02A2B3B-706E-4277-9CE2-B47733CCB22F}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{F02A2B3B-706E-4277-9CE2-B47733CCB22F}.Release|Any CPU.Build.0 = Release|Any CPU
		{33F13C14-A4E4-467A-BBBC-14A0F7408E77}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{33F13C14-A4E4-467A-BBBC-14A0F7408E77}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{33F13C14-A4E4-467A-BBBC-14A0F7408E77}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{33F13C14-A4E4-467A-BBBC-14A0F7408E77}.Release|Any CPU.Build.0 = Release|Any CPU
		{3D40BD49-A118-4655-8452-8CFAE677847A}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{3D40BD49-A118-4655-8452-8CFAE677847A}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{3D40BD49-A118-4655-8452-8CFAE677847A}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{3D40BD49-A118-4655-8452-8CFAE677847A}.Release|Any CPU.Build.0 = Release|Any CPU
		{2972BDC7-1337-4BDC-8C37-99227A7861FD}.Debug|Any CPU.ActiveCfg = Debug|Any CPU
		{2972BDC7-1337-4BDC-8C37-99227A7861FD}.Debug|Any CPU.Build.0 = Debug|Any CPU
		{2972BDC7-1337-4BDC-8C37-99227A7861FD}.Release|Any CPU.ActiveCfg = Release|Any CPU
		{2972BDC7-1337-4BDC-8C37-99227A7861FD}.Release|Any CPU.Build.0 = Release|Any CPU
	EndGlobalSection
	GlobalSection(SolutionProperties) = preSolution
		HideSolutionNode = FALSE
	EndGlobalSection
	GlobalSection(ExtensibilityGlobals) = postSolution
		SolutionGuid = {55A32531-B44C-4843-9FC5-052AAE7525A3}
	EndGlobalSection
	GlobalSection(SharedMSBuildProjectFiles) = preSolution
		SadConsole.Host.Shared\SadConsole.Host.Shared.projitems*{595434c5-2192-495b-903c-7922d7e8b149}*SharedItemsImports = 13
		SadConsole.Host.Shared\SadConsole.Host.Shared.projitems*{f02a2b3b-706e-4277-9ce2-b47733ccb22f}*SharedItemsImports = 5
	EndGlobalSection
EndGlobal
